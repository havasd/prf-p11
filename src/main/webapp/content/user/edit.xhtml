<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="/templates/logged-in-default.xhtml">

    <f:metadata>
        <f:viewAction action="#{userView.loadCurrent()}" />
    </f:metadata>

    <ui:define name="mainContent">
    
        <h:panelGroup layout="block" rendered="#{empty userView.user}">
            <h1>Felhasználó</h1>
            Nincs ilyen felhasználó.
        </h:panelGroup>
        
        <h:panelGroup layout="block" rendered="#{not empty userView.user}">

            <h1>Adatok szerkesztése</h1>
            
            <h:form>
            
                <div>
	                <h:outputLabel
		                for="userName"
		                value="Név: "/>
	                <h:inputText
		                id="userName"
		                value="#{userView.user.name}"
		                required="true" />
	                <h:message
		                for="userName"
		                styleClass="error" />
                </div>
                
                <div>
	                <h:outputLabel
		                for="userEmail"
		                value="E-mail: "/>
	                <h:inputText
		                id="userEmail"
		                value="#{userView.user.email}"
		                required="true" />
	                <h:message
		                for="userEmail"
		                styleClass="error" />
                </div>
                
                <div>
	                <h:outputLabel
		                for="userPassword"
		                value="Jelszó: "/>
	                <h:inputSecret
		                id="userPassword"
		                value="#{userView.user.password}"
		                required="false" />
                </div>

                <div>
	                <h:outputLabel
		                for="userBirthDate"
		                value="Születési dátum: "/>
	                <h:inputText
	                    id="userBirthDate"
		                value="#{userView.user.birthDate}"
		                required="true">
	                   <f:convertDateTime pattern="yyyy. MM. dd." />
	                </h:inputText>
	                <h:message
		                for="userBirthDate"
		                styleClass="error" />
                </div>

                <div>
	                <h:outputLabel
		                for="userCountry"
		                value="Ország: "/>
	                <h:inputText
		                id="userCountry"
		                value="#{userView.user.address.country}"
		                required="true" />
	                <h:message
		                for="userCountry"
		                styleClass="error" />
                </div>

                <div>
	                <h:outputLabel
		                for="userCity"
		                value="Város: "/>
	                <h:inputText
		                id="userCity"
		                value="#{userView.user.address.city}"
		                required="true" />
	                <h:message
		                for="userCity"
		                styleClass="error" />
                </div>

                <div>
	                <h:outputLabel
		                for="userStreet"
		                value="Utca: "/>
	                <h:inputText
		                id="userStreet"
		                value="#{userView.user.address.street}"
		                required="true" />
	                <h:message
		                for="userStreet"
		                styleClass="error" />
                </div>

                <div>
	                <h:outputLabel
		                for="userNumber"
		                value="Házszám: "/>
	                <h:inputText
		                id="userNumber"
		                value="#{userView.user.address.number}"
		                required="true" />
	                <h:message
		                for="userNumber"
		                styleClass="error" />
                </div>

                <h:commandLink
	                value="Mentés"
	                action="#{userView.save()}" />
	                
            </h:form>

        </h:panelGroup>

    </ui:define>
    
</ui:composition>
